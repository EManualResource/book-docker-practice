<!DOCTYPE HTML><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>私有仓库 | http2讲解</title><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta name="description" content=""><meta name="generator" content="GitBook 2.6.5"><meta name="HandheldFriendly" content="true"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png"><link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="../gitbook/style.css"><link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css"><link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css"><link rel="next" href="../repository/config.html"><link rel="prev" href="../repository/dockerhub.html"></head><body><div class="book" data-level="6.2" data-chapter-title="私有仓库" data-filepath="repository/local_repo.md" data-basepath=".." data-revision="Thu Feb 04 2016 01:48:09 GMT+0800 (CST)" data-innerlanguage=""><div class="book-summary"><nav role="navigation"><ul class="summary"><li class="chapter" data-level="0" data-path="index.html"><a href="../index.html"><i class="fa fa-check"></i> 前言</a></li><li class="chapter" data-level="1" data-path="introduction/index.html"><a href="../introduction/index.html"><i class="fa fa-check"></i> <b>1.</b> Docker 简介</a><ul class="articles"><li class="chapter" data-level="1.1" data-path="introduction/what.html"><a href="../introduction/what.html"><i class="fa fa-check"></i> <b>1.1.</b> 什么是 Docker</a></li><li class="chapter" data-level="1.2" data-path="introduction/why.html"><a href="../introduction/why.html"><i class="fa fa-check"></i> <b>1.2.</b> 为什么要用 Docker</a></li></ul></li><li class="chapter" data-level="2" data-path="basic_concept/index.html"><a href="../basic_concept/index.html"><i class="fa fa-check"></i> <b>2.</b> 基本概念</a><ul class="articles"><li class="chapter" data-level="2.1" data-path="basic_concept/image.html"><a href="../basic_concept/image.html"><i class="fa fa-check"></i> <b>2.1.</b> 镜像</a></li><li class="chapter" data-level="2.2" data-path="basic_concept/container.html"><a href="../basic_concept/container.html"><i class="fa fa-check"></i> <b>2.2.</b> 容器</a></li><li class="chapter" data-level="2.3" data-path="basic_concept/repository.html"><a href="../basic_concept/repository.html"><i class="fa fa-check"></i> <b>2.3.</b> 仓库</a></li></ul></li><li class="chapter" data-level="3" data-path="install/index.html"><a href="../install/index.html"><i class="fa fa-check"></i> <b>3.</b> 安装</a><ul class="articles"><li class="chapter" data-level="3.1" data-path="install/ubuntu.html"><a href="../install/ubuntu.html"><i class="fa fa-check"></i> <b>3.1.</b> Ubuntu</a></li><li class="chapter" data-level="3.2" data-path="install/centos.html"><a href="../install/centos.html"><i class="fa fa-check"></i> <b>3.2.</b> CentOS</a></li></ul></li><li class="chapter" data-level="4" data-path="image/index.html"><a href="../image/index.html"><i class="fa fa-check"></i> <b>4.</b> 镜像</a><ul class="articles"><li class="chapter" data-level="4.1" data-path="image/pull.html"><a href="../image/pull.html"><i class="fa fa-check"></i> <b>4.1.</b> 获取镜像</a></li><li class="chapter" data-level="4.2" data-path="image/list.html"><a href="../image/list.html"><i class="fa fa-check"></i> <b>4.2.</b> 列出</a></li><li class="chapter" data-level="4.3" data-path="image/create.html"><a href="../image/create.html"><i class="fa fa-check"></i> <b>4.3.</b> 创建</a></li><li class="chapter" data-level="4.4" data-path="image/save_load.html"><a href="../image/save_load.html"><i class="fa fa-check"></i> <b>4.4.</b> 存出和载入</a></li><li class="chapter" data-level="4.5" data-path="image/rmi.html"><a href="../image/rmi.html"><i class="fa fa-check"></i> <b>4.5.</b> 移除</a></li><li class="chapter" data-level="4.6" data-path="image/internal.html"><a href="../image/internal.html"><i class="fa fa-check"></i> <b>4.6.</b> 实现原理</a></li></ul></li><li class="chapter" data-level="5" data-path="container/index.html"><a href="../container/index.html"><i class="fa fa-check"></i> <b>5.</b> 容器</a><ul class="articles"><li class="chapter" data-level="5.1" data-path="container/run.html"><a href="../container/run.html"><i class="fa fa-check"></i> <b>5.1.</b> 启动</a></li><li class="chapter" data-level="5.2" data-path="container/daemon.html"><a href="../container/daemon.html"><i class="fa fa-check"></i> <b>5.2.</b> 守护态运行</a></li><li class="chapter" data-level="5.3" data-path="container/stop.html"><a href="../container/stop.html"><i class="fa fa-check"></i> <b>5.3.</b> 终止</a></li><li class="chapter" data-level="5.4" data-path="container/enter.html"><a href="../container/enter.html"><i class="fa fa-check"></i> <b>5.4.</b> 进入容器</a></li><li class="chapter" data-level="5.5" data-path="container/import_export.html"><a href="../container/import_export.html"><i class="fa fa-check"></i> <b>5.5.</b> 导出和导入</a></li><li class="chapter" data-level="5.6" data-path="container/rm.html"><a href="../container/rm.html"><i class="fa fa-check"></i> <b>5.6.</b> 删除</a></li></ul></li><li class="chapter" data-level="6" data-path="repository/index.html"><a href="../repository/index.html"><i class="fa fa-check"></i> <b>6.</b> 仓库</a><ul class="articles"><li class="chapter" data-level="6.1" data-path="repository/dockerhub.html"><a href="../repository/dockerhub.html"><i class="fa fa-check"></i> <b>6.1.</b> Docker Hub</a></li><li class="chapter active" data-level="6.2" data-path="repository/local_repo.html"><a href="../repository/local_repo.html"><i class="fa fa-check"></i> <b>6.2.</b> 私有仓库</a></li><li class="chapter" data-level="6.3" data-path="repository/config.html"><a href="../repository/config.html"><i class="fa fa-check"></i> <b>6.3.</b> 配置文件</a></li></ul></li><li class="chapter" data-level="7" data-path="data_management/index.html"><a href="../data_management/index.html"><i class="fa fa-check"></i> <b>7.</b> 数据管理</a><ul class="articles"><li class="chapter" data-level="7.1" data-path="data_management/volume.html"><a href="../data_management/volume.html"><i class="fa fa-check"></i> <b>7.1.</b> 数据卷</a></li><li class="chapter" data-level="7.2" data-path="data_management/container.html"><a href="../data_management/container.html"><i class="fa fa-check"></i> <b>7.2.</b> 数据卷容器</a></li><li class="chapter" data-level="7.3" data-path="data_management/management.html"><a href="../data_management/management.html"><i class="fa fa-check"></i> <b>7.3.</b> 备份、恢复、迁移数据卷</a></li></ul></li><li class="chapter" data-level="8" data-path="network/index.html"><a href="../network/index.html"><i class="fa fa-check"></i> <b>8.</b> 使用网络</a><ul class="articles"><li class="chapter" data-level="8.1" data-path="network/port_mapping.html"><a href="../network/port_mapping.html"><i class="fa fa-check"></i> <b>8.1.</b> 外部访问容器</a></li><li class="chapter" data-level="8.2" data-path="network/linking.html"><a href="../network/linking.html"><i class="fa fa-check"></i> <b>8.2.</b> 容器互联</a></li></ul></li><li class="chapter" data-level="9" data-path="advanced_network/index.html"><a href="../advanced_network/index.html"><i class="fa fa-check"></i> <b>9.</b> 高级网络配置</a><ul class="articles"><li class="chapter" data-level="9.1" data-path="advanced_network/quick_guide.html"><a href="../advanced_network/quick_guide.html"><i class="fa fa-check"></i> <b>9.1.</b> 快速配置指南</a></li><li class="chapter" data-level="9.2" data-path="advanced_network/dns.html"><a href="../advanced_network/dns.html"><i class="fa fa-check"></i> <b>9.2.</b> 配置 DNS</a></li><li class="chapter" data-level="9.3" data-path="advanced_network/access_control.html"><a href="../advanced_network/access_control.html"><i class="fa fa-check"></i> <b>9.3.</b> 容器访问控制</a></li><li class="chapter" data-level="9.4" data-path="advanced_network/port_mapping.html"><a href="../advanced_network/port_mapping.html"><i class="fa fa-check"></i> <b>9.4.</b> 端口映射实现</a></li><li class="chapter" data-level="9.5" data-path="advanced_network/docker0.html"><a href="../advanced_network/docker0.html"><i class="fa fa-check"></i> <b>9.5.</b> 配置 docker0 网桥</a></li><li class="chapter" data-level="9.6" data-path="advanced_network/bridge.html"><a href="../advanced_network/bridge.html"><i class="fa fa-check"></i> <b>9.6.</b> 自定义网桥</a></li><li class="chapter" data-level="9.7" data-path="advanced_network/example.html"><a href="../advanced_network/example.html"><i class="fa fa-check"></i> <b>9.7.</b> 工具和示例</a></li><li class="chapter" data-level="9.8" data-path="advanced_network/config_file.html"><a href="../advanced_network/config_file.html"><i class="fa fa-check"></i> <b>9.8.</b> 编辑网络配置文件</a></li><li class="chapter" data-level="9.9" data-path="advanced_network/ptp.html"><a href="../advanced_network/ptp.html"><i class="fa fa-check"></i> <b>9.9.</b> 实例：创建一个点到点连接</a></li></ul></li><li class="chapter" data-level="10" data-path="cases/index.html"><a href="../cases/index.html"><i class="fa fa-check"></i> <b>10.</b> 实战案例</a><ul class="articles"><li class="chapter" data-level="10.1" data-path="cases/supervisor.html"><a href="../cases/supervisor.html"><i class="fa fa-check"></i> <b>10.1.</b> 使用 Supervisor 来管理进程</a></li><li class="chapter" data-level="10.2" data-path="cases/tomcat.html"><a href="../cases/tomcat.html"><i class="fa fa-check"></i> <b>10.2.</b> 创建 tomcat/weblogic 集群</a></li><li class="chapter" data-level="10.3" data-path="cases/container_connect.html"><a href="../cases/container_connect.html"><i class="fa fa-check"></i> <b>10.3.</b> 多台物理主机之间的容器互联</a></li><li class="chapter" data-level="10.4" data-path="cases/environment.html"><a href="../cases/environment.html"><i class="fa fa-check"></i> <b>10.4.</b> 标准化开发测试和生产环境</a></li></ul></li><li class="chapter" data-level="11" data-path="security/index.html"><a href="../security/index.html"><i class="fa fa-check"></i> <b>11.</b> 安全</a><ul class="articles"><li class="chapter" data-level="11.1" data-path="security/kernel_ns.html"><a href="../security/kernel_ns.html"><i class="fa fa-check"></i> <b>11.1.</b> 内核名字空间</a></li><li class="chapter" data-level="11.2" data-path="security/control_group.html"><a href="../security/control_group.html"><i class="fa fa-check"></i> <b>11.2.</b> 控制组</a></li><li class="chapter" data-level="11.3" data-path="security/daemon_sec.html"><a href="../security/daemon_sec.html"><i class="fa fa-check"></i> <b>11.3.</b> 服务端防护</a></li><li class="chapter" data-level="11.4" data-path="security/kernel_capability.html"><a href="../security/kernel_capability.html"><i class="fa fa-check"></i> <b>11.4.</b> 内核能力机制</a></li><li class="chapter" data-level="11.5" data-path="security/other_feature.html"><a href="../security/other_feature.html"><i class="fa fa-check"></i> <b>11.5.</b> 其它安全特性</a></li><li class="chapter" data-level="11.6" data-path="security/summary.html"><a href="../security/summary.html"><i class="fa fa-check"></i> <b>11.6.</b> 总结</a></li></ul></li><li class="chapter" data-level="12" data-path="dockerfile/index.html"><a href="../dockerfile/index.html"><i class="fa fa-check"></i> <b>12.</b> Dockerfile</a><ul class="articles"><li class="chapter" data-level="12.1" data-path="dockerfile/basic_structure.html"><a href="../dockerfile/basic_structure.html"><i class="fa fa-check"></i> <b>12.1.</b> 基本结构</a></li><li class="chapter" data-level="12.2" data-path="dockerfile/instructions.html"><a href="../dockerfile/instructions.html"><i class="fa fa-check"></i> <b>12.2.</b> 指令</a></li><li class="chapter" data-level="12.3" data-path="dockerfile/build_image.html"><a href="../dockerfile/build_image.html"><i class="fa fa-check"></i> <b>12.3.</b> 创建镜像</a></li></ul></li><li class="chapter" data-level="13" data-path="underly/index.html"><a href="../underly/index.html"><i class="fa fa-check"></i> <b>13.</b> 底层实现</a><ul class="articles"><li class="chapter" data-level="13.1" data-path="underly/arch.html"><a href="../underly/arch.html"><i class="fa fa-check"></i> <b>13.1.</b> 基本架构</a></li><li class="chapter" data-level="13.2" data-path="underly/namespace.html"><a href="../underly/namespace.html"><i class="fa fa-check"></i> <b>13.2.</b> 名字空间</a></li><li class="chapter" data-level="13.3" data-path="underly/cgroups.html"><a href="../underly/cgroups.html"><i class="fa fa-check"></i> <b>13.3.</b> 控制组</a></li><li class="chapter" data-level="13.4" data-path="underly/ufs.html"><a href="../underly/ufs.html"><i class="fa fa-check"></i> <b>13.4.</b> 联合文件系统</a></li><li class="chapter" data-level="13.5" data-path="underly/container_format.html"><a href="../underly/container_format.html"><i class="fa fa-check"></i> <b>13.5.</b> 容器格式</a></li><li class="chapter" data-level="13.6" data-path="underly/network.html"><a href="../underly/network.html"><i class="fa fa-check"></i> <b>13.6.</b> 网络</a></li></ul></li><li class="chapter" data-level="14" data-path="compose/index.html"><a href="../compose/index.html"><i class="fa fa-check"></i> <b>14.</b> Docker Compose 项目</a><ul class="articles"><li class="chapter" data-level="14.1" data-path="compose/intro.html"><a href="../compose/intro.html"><i class="fa fa-check"></i> <b>14.1.</b> 简介</a></li><li class="chapter" data-level="14.2" data-path="compose/install.html"><a href="../compose/install.html"><i class="fa fa-check"></i> <b>14.2.</b> 安装</a></li><li class="chapter" data-level="14.3" data-path="compose/usage.html"><a href="../compose/usage.html"><i class="fa fa-check"></i> <b>14.3.</b> 使用</a></li><li class="chapter" data-level="14.4" data-path="compose/commands.html"><a href="../compose/commands.html"><i class="fa fa-check"></i> <b>14.4.</b> 命令说明</a></li><li class="chapter" data-level="14.5" data-path="compose/yaml_file.html"><a href="../compose/yaml_file.html"><i class="fa fa-check"></i> <b>14.5.</b> YAML 模板文件</a></li></ul></li><li class="chapter" data-level="15" data-path="machine/index.html"><a href="../machine/index.html"><i class="fa fa-check"></i> <b>15.</b> Docker Machine 项目</a><ul class="articles"><li class="chapter" data-level="15.1" data-path="machine/intro.html"><a href="../machine/intro.html"><i class="fa fa-check"></i> <b>15.1.</b> 简介</a></li><li class="chapter" data-level="15.2" data-path="machine/install.html"><a href="../machine/install.html"><i class="fa fa-check"></i> <b>15.2.</b> 安装</a></li><li class="chapter" data-level="15.3" data-path="machine/usage.html"><a href="../machine/usage.html"><i class="fa fa-check"></i> <b>15.3.</b> 使用</a></li></ul></li><li class="chapter" data-level="16" data-path="swarm/index.html"><a href="../swarm/index.html"><i class="fa fa-check"></i> <b>16.</b> Docker Swarm 项目</a><ul class="articles"><li class="chapter" data-level="16.1" data-path="swarm/intro.html"><a href="../swarm/intro.html"><i class="fa fa-check"></i> <b>16.1.</b> 简介</a></li><li class="chapter" data-level="16.2" data-path="swarm/install.html"><a href="../swarm/install.html"><i class="fa fa-check"></i> <b>16.2.</b> 安装</a></li><li class="chapter" data-level="16.3" data-path="swarm/usage.html"><a href="../swarm/usage.html"><i class="fa fa-check"></i> <b>16.3.</b> 使用</a></li><li class="chapter" data-level="16.4" data-path="swarm/scheduling.html"><a href="../swarm/scheduling.html"><i class="fa fa-check"></i> <b>16.4.</b> 调度器</a></li><li class="chapter" data-level="16.5" data-path="swarm/filter.html"><a href="../swarm/filter.html"><i class="fa fa-check"></i> <b>16.5.</b> 过滤器</a></li></ul></li><li class="chapter" data-level="17" data-path="etcd/index.html"><a href="../etcd/index.html"><i class="fa fa-check"></i> <b>17.</b> Etcd 项目</a><ul class="articles"><li class="chapter" data-level="17.1" data-path="etcd/intro.html"><a href="../etcd/intro.html"><i class="fa fa-check"></i> <b>17.1.</b> 简介</a></li><li class="chapter" data-level="17.2" data-path="etcd/install.html"><a href="../etcd/install.html"><i class="fa fa-check"></i> <b>17.2.</b> 安装</a></li><li class="chapter" data-level="17.3" data-path="etcd/etcdctl.html"><a href="../etcd/etcdctl.html"><i class="fa fa-check"></i> <b>17.3.</b> 使用 etcdctl</a></li></ul></li><li class="chapter" data-level="18" data-path="fig/index.html"><a href="../fig/index.html"><i class="fa fa-check"></i> <b>18.</b> Fig 项目</a><ul class="articles"><li class="chapter" data-level="18.1" data-path="fig/intro.html"><a href="../fig/intro.html"><i class="fa fa-check"></i> <b>18.1.</b> 简介</a></li><li class="chapter" data-level="18.2" data-path="fig/install.html"><a href="../fig/install.html"><i class="fa fa-check"></i> <b>18.2.</b> 安装</a></li><li class="chapter" data-level="18.3" data-path="fig/cli_ref.html"><a href="../fig/cli_ref.html"><i class="fa fa-check"></i> <b>18.3.</b> 命令参考</a></li><li class="chapter" data-level="18.4" data-path="fig/yml_ref.html"><a href="../fig/yml_ref.html"><i class="fa fa-check"></i> <b>18.4.</b> fig.yml参考</a></li><li class="chapter" data-level="18.5" data-path="fig/env_ref.html"><a href="../fig/env_ref.html"><i class="fa fa-check"></i> <b>18.5.</b> 环境变量参考</a></li><li class="chapter" data-level="18.6" data-path="fig/django.html"><a href="../fig/django.html"><i class="fa fa-check"></i> <b>18.6.</b> 实战 Django</a></li><li class="chapter" data-level="18.7" data-path="fig/rails.html"><a href="../fig/rails.html"><i class="fa fa-check"></i> <b>18.7.</b> 实战 Rails</a></li><li class="chapter" data-level="18.8" data-path="fig/wordpress.html"><a href="../fig/wordpress.html"><i class="fa fa-check"></i> <b>18.8.</b> 实战 wordpress</a></li></ul></li><li class="chapter" data-level="19" data-path="coreos/index.html"><a href="../coreos/index.html"><i class="fa fa-check"></i> <b>19.</b> CoreOS 项目</a><ul class="articles"><li class="chapter" data-level="19.1" data-path="coreos/intro.html"><a href="../coreos/intro.html"><i class="fa fa-check"></i> <b>19.1.</b> 简介</a></li><li class="chapter" data-level="19.2" data-path="coreos/intro_tools.html"><a href="../coreos/intro_tools.html"><i class="fa fa-check"></i> <b>19.2.</b> 工具</a></li><li class="chapter" data-level="19.3" data-path="coreos/quickstart.html"><a href="../coreos/quickstart.html"><i class="fa fa-check"></i> <b>19.3.</b> 快速搭建CoreOS集群</a></li></ul></li><li class="chapter" data-level="20" data-path="kubernetes/index.html"><a href="../kubernetes/index.html"><i class="fa fa-check"></i> <b>20.</b> Kubernetes 项目</a><ul class="articles"><li class="chapter" data-level="20.1" data-path="kubernetes/intro.html"><a href="../kubernetes/intro.html"><i class="fa fa-check"></i> <b>20.1.</b> 简介</a></li><li class="chapter" data-level="20.2" data-path="kubernetes/quickstart.html"><a href="../kubernetes/quickstart.html"><i class="fa fa-check"></i> <b>20.2.</b> 快速上手</a></li><li class="chapter" data-level="20.3" data-path="kubernetes/concepts.html"><a href="../kubernetes/concepts.html"><i class="fa fa-check"></i> <b>20.3.</b> 基本概念</a></li><li class="chapter" data-level="20.4" data-path="kubernetes/kubectl.html"><a href="../kubernetes/kubectl.html"><i class="fa fa-check"></i> <b>20.4.</b> kubectl 使用</a></li><li class="chapter" data-level="20.5" data-path="kubernetes/design.html"><a href="../kubernetes/design.html"><i class="fa fa-check"></i> <b>20.5.</b> 架构设计</a></li></ul></li><li class="chapter" data-level="21" data-path="mesos/index.html"><a href="../mesos/index.html"><i class="fa fa-check"></i> <b>21.</b> Mesos 项目</a><ul class="articles"><li class="chapter" data-level="21.1" data-path="mesos/intro.html"><a href="../mesos/intro.html"><i class="fa fa-check"></i> <b>21.1.</b> 简介</a></li><li class="chapter" data-level="21.2" data-path="mesos/installation.html"><a href="../mesos/installation.html"><i class="fa fa-check"></i> <b>21.2.</b> 安装与使用</a></li><li class="chapter" data-level="21.3" data-path="mesos/architecture.html"><a href="../mesos/architecture.html"><i class="fa fa-check"></i> <b>21.3.</b> 原理与架构</a></li><li class="chapter" data-level="21.4" data-path="mesos/configuration.html"><a href="../mesos/configuration.html"><i class="fa fa-check"></i> <b>21.4.</b> 配置项解析</a></li><li class="chapter" data-level="21.5" data-path="mesos/framework.html"><a href="../mesos/framework.html"><i class="fa fa-check"></i> <b>21.5.</b> 常见框架</a></li></ul></li><li class="chapter" data-level="22" data-path="appendix_command/index.html"><a href="../appendix_command/index.html"><i class="fa fa-check"></i> <b>22.</b> 附录一：命令查询</a></li><li class="chapter" data-level="23" data-path="appendix_repo/index.html"><a href="../appendix_repo/index.html"><i class="fa fa-check"></i> <b>23.</b> 附录二：常见仓库介绍</a><ul class="articles"><li class="chapter" data-level="23.1" data-path="appendix_repo/ubuntu.html"><a href="../appendix_repo/ubuntu.html"><i class="fa fa-check"></i> <b>23.1.</b> Ubuntu</a></li><li class="chapter" data-level="23.2" data-path="appendix_repo/centos.html"><a href="../appendix_repo/centos.html"><i class="fa fa-check"></i> <b>23.2.</b> CentOS</a></li><li class="chapter" data-level="23.3" data-path="appendix_repo/mysql.html"><a href="../appendix_repo/mysql.html"><i class="fa fa-check"></i> <b>23.3.</b> MySQL</a></li><li class="chapter" data-level="23.4" data-path="appendix_repo/mongodb.html"><a href="../appendix_repo/mongodb.html"><i class="fa fa-check"></i> <b>23.4.</b> MongoDB</a></li><li class="chapter" data-level="23.5" data-path="appendix_repo/redis.html"><a href="../appendix_repo/redis.html"><i class="fa fa-check"></i> <b>23.5.</b> Redis</a></li><li class="chapter" data-level="23.6" data-path="appendix_repo/nginx.html"><a href="../appendix_repo/nginx.html"><i class="fa fa-check"></i> <b>23.6.</b> Nginx</a></li><li class="chapter" data-level="23.7" data-path="appendix_repo/wordpress.html"><a href="../appendix_repo/wordpress.html"><i class="fa fa-check"></i> <b>23.7.</b> WordPress</a></li><li class="chapter" data-level="23.8" data-path="appendix_repo/nodejs.html"><a href="../appendix_repo/nodejs.html"><i class="fa fa-check"></i> <b>23.8.</b> Node.js</a></li></ul></li><li class="chapter" data-level="24" data-path="appendix_resources/index.html"><a href="../appendix_resources/index.html"><i class="fa fa-check"></i> <b>24.</b> 附录三：有用的资源</a></li><li class="divider"></li><li><a href="https://www.gitbook.com" target="blank" class="gitbook-link">Published with GitBook</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header" role="navigation"><h1><i class="fa fa-circle-o-notch fa-spin"></i> <a href="../">http2讲解</a></h1></div><div class="page-wrapper" tabindex="-1" role="main"><div class="page-inner"><section class="normal" id="section-"><h2 id="&#x79C1;&#x6709;&#x4ED3;&#x5E93;">&#x79C1;&#x6709;&#x4ED3;&#x5E93;</h2><p>&#x6709;&#x65F6;&#x5019;&#x4F7F;&#x7528; Docker Hub &#x8FD9;&#x6837;&#x7684;&#x516C;&#x5171;&#x4ED3;&#x5E93;&#x53EF;&#x80FD;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x4F9B;&#x79C1;&#x4EBA;&#x4F7F;&#x7528;&#x3002;</p><p>&#x672C;&#x8282;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x3002;</p><p><code>docker-registry</code> &#x662F;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x79C1;&#x6709;&#x7684;&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#x3002;</p><h3 id="&#x5B89;&#x88C5;&#x8FD0;&#x884C;-dockerregistry">&#x5B89;&#x88C5;&#x8FD0;&#x884C; docker-registry</h3><h4 id="&#x5BB9;&#x5668;&#x8FD0;&#x884C;">&#x5BB9;&#x5668;&#x8FD0;&#x884C;</h4><p>&#x5728;&#x5B89;&#x88C5;&#x4E86; Docker &#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x83B7;&#x53D6;&#x5B98;&#x65B9; registry &#x955C;&#x50CF;&#x6765;&#x8FD0;&#x884C;&#x3002;</p><pre><code>$ sudo docker run -d -p 5000:5000 registry
</code></pre><p>&#x8FD9;&#x5C06;&#x4F7F;&#x7528;&#x5B98;&#x65B9;&#x7684; registry &#x955C;&#x50CF;&#x6765;&#x542F;&#x52A8;&#x672C;&#x5730;&#x7684;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x3002; &#x7528;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x6765;&#x914D;&#x7F6E;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x5B58;&#x50A8;&#x5230; Amazon S3 &#x670D;&#x52A1;&#x3002;</p><pre><code>$ sudo docker run \
         -e SETTINGS_FLAVOR=s3 \
         -e AWS_BUCKET=acme-docker \
         -e STORAGE_PATH=/registry \
         -e AWS_KEY=AKIAHSHB43HS3J92MXZ \
         -e AWS_SECRET=xdDowwlK7TJajV1Y7EoOZrmuPEJlHYcNP2k4j49T \
         -e SEARCH_BACKEND=sqlalchemy \
         -p 5000:5000 \
         registry
`
</code></pre><p>&#x6B64;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x672C;&#x5730;&#x8DEF;&#x5F84;&#xFF08;&#x5982; <code>/home/user/registry-conf</code> &#xFF09;&#x4E0B;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p><pre><code>$ sudo docker run -d -p 5000:5000 -v /home/user/registry-conf:/registry-conf -e DOCKER_REGISTRY_CONFIG=/registry-conf/config.yml registry
</code></pre><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4ED3;&#x5E93;&#x4F1A;&#x88AB;&#x521B;&#x5EFA;&#x5728;&#x5BB9;&#x5668;&#x7684; <code>/tmp/registry</code> &#x4E0B;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>-v</code> &#x53C2;&#x6570;&#x6765;&#x5C06;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x5728;&#x672C;&#x5730;&#x7684;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#x3002; &#x4F8B;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x5C06;&#x4E0A;&#x4F20;&#x7684;&#x955C;&#x50CF;&#x653E;&#x5230; <code>/opt/data/registry</code> &#x76EE;&#x5F55;&#x3002;</p><pre><code>$ sudo docker run -d -p 5000:5000 -v /opt/data/registry:/tmp/registry registry
</code></pre><h4 id="&#x672C;&#x5730;&#x5B89;&#x88C5;">&#x672C;&#x5730;&#x5B89;&#x88C5;</h4><p>&#x5BF9;&#x4E8E; Ubuntu &#x6216; CentOS &#x7B49;&#x53D1;&#x884C;&#x7248;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x6E90;&#x5B89;&#x88C5;&#x3002;</p><ul><li>Ubuntu<pre><code>$ sudo apt-get install -y build-essential python-dev libevent-dev python-pip liblzma-dev
$ sudo pip install docker-registry
</code></pre></li><li>CentOS<pre><code>$ sudo yum install -y python-devel libevent-devel python-pip gcc xz-devel
$ sudo python-pip install docker-registry
</code></pre></li></ul><p>&#x4E5F;&#x53EF;&#x4EE5;&#x4ECE; <a href="https://github.com/docker/docker-registry" target="_blank">docker-registry</a> &#x9879;&#x76EE;&#x4E0B;&#x8F7D;&#x6E90;&#x7801;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x3002;</p><pre><code>$ sudo apt-get install build-essential python-dev libevent-dev python-pip libssl-dev liblzma-dev libffi-dev
$ git clone https://github.com/docker/docker-registry.git
$ cd docker-registry
$ sudo python setup.py install
</code></pre><p>&#x7136;&#x540E;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4E3B;&#x8981;&#x4FEE;&#x6539; dev &#x6A21;&#x677F;&#x6BB5;&#x7684; <code>storage_path</code> &#x5230;&#x672C;&#x5730;&#x7684;&#x5B58;&#x50A8;&#x4ED3;&#x5E93;&#x7684;&#x8DEF;&#x5F84;&#x3002;</p><pre><code>$ cp config/config_sample.yml config/config.yml
</code></pre><p>&#x4E4B;&#x540E;&#x542F;&#x52A8; Web &#x670D;&#x52A1;&#x3002;</p><pre><code>$ sudo gunicorn -c contrib/gunicorn.py docker_registry.wsgi:application
</code></pre><p>&#x6216;&#x8005;</p><pre><code>$ sudo gunicorn --access-logfile - --error-logfile - -k gevent -b 0.0.0.0:5000 -w 4 --max-requests 100 docker_registry.wsgi:application
</code></pre><p>&#x6B64;&#x65F6;&#x4F7F;&#x7528; curl &#x8BBF;&#x95EE;&#x672C;&#x5730;&#x7684; 5000 &#x7AEF;&#x53E3;&#xFF0C;&#x770B;&#x5230;&#x8F93;&#x51FA; docker-registry &#x7684;&#x7248;&#x672C;&#x4FE1;&#x606F;&#x8BF4;&#x660E;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x3002;</p><p>*&#x6CE8;&#xFF1A;<code>config/config_sample.yml</code> &#x6587;&#x4EF6;&#x662F;&#x793A;&#x4F8B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p><h3 id="&#x5728;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x4E0A;&#x4F20;&#x3001;&#x4E0B;&#x8F7D;&#x3001;&#x641C;&#x7D22;&#x955C;&#x50CF;">&#x5728;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x4E0A;&#x4F20;&#x3001;&#x4E0B;&#x8F7D;&#x3001;&#x641C;&#x7D22;&#x955C;&#x50CF;</h3><p>&#x521B;&#x5EFA;&#x597D;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>docker tag</code> &#x6765;&#x6807;&#x8BB0;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x7136;&#x540E;&#x63A8;&#x9001;&#x5B83;&#x5230;&#x4ED3;&#x5E93;&#xFF0C;&#x522B;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x5C31;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x4E0B;&#x6765;&#x4E86;&#x3002;&#x4F8B;&#x5982;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#x4E3A; <code>192.168.7.26:5000</code>&#x3002;</p><p>&#x5148;&#x5728;&#x672C;&#x673A;&#x67E5;&#x770B;&#x5DF2;&#x6709;&#x7684;&#x955C;&#x50CF;&#x3002;</p><pre><code>$ sudo docker images
REPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB
ubuntu                            14.04               ba5877dc9bec        6 weeks ago         192.7 MB
</code></pre><p>&#x4F7F;&#x7528;<code>docker tag</code> &#x5C06; <code>ba58</code> &#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x6807;&#x8BB0;&#x4E3A; <code>192.168.7.26:5000/test</code>&#xFF08;&#x683C;&#x5F0F;&#x4E3A; <code>docker tag IMAGE[:TAG] [REGISTRYHOST/][USERNAME/]NAME[:TAG]</code>&#xFF09;&#x3002;</p><pre><code>$ sudo docker tag ba58 192.168.7.26:5000/test
root ~ # docker images
REPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu                            14.04               ba5877dc9bec        6 weeks ago         192.7 MB
ubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB
192.168.7.26:5000/test            latest              ba5877dc9bec        6 weeks ago         192.7 MB
</code></pre><p>&#x4F7F;&#x7528; <code>docker push</code> &#x4E0A;&#x4F20;&#x6807;&#x8BB0;&#x7684;&#x955C;&#x50CF;&#x3002;</p><pre><code>$ sudo docker push 192.168.7.26:5000/test
The push refers to a repository [192.168.7.26:5000/test] (len: 1)
Sending image list
Pushing repository 192.168.7.26:5000/test (1 tags)
Image 511136ea3c5a already pushed, skipping
Image 9bad880da3d2 already pushed, skipping
Image 25f11f5fb0cb already pushed, skipping
Image ebc34468f71d already pushed, skipping
Image 2318d26665ef already pushed, skipping
Image ba5877dc9bec already pushed, skipping
Pushing tag for rev [ba5877dc9bec] on {http://192.168.7.26:5000/v1/repositories/test/tags/latest}
</code></pre><p>&#x7528; curl &#x67E5;&#x770B;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x955C;&#x50CF;&#x3002;</p><pre><code>$ curl http://192.168.7.26:5000/v1/search
{&quot;num_results&quot;: 7, &quot;query&quot;: &quot;&quot;, &quot;results&quot;: [{&quot;description&quot;: &quot;&quot;, &quot;name&quot;: &quot;library/miaxis_j2ee&quot;}, {&quot;description&quot;: &quot;&quot;, &quot;name&quot;: &quot;library/tomcat&quot;}, {&quot;description&quot;: &quot;&quot;, &quot;name&quot;: &quot;library/ubuntu&quot;}, {&quot;description&quot;: &quot;&quot;, &quot;name&quot;: &quot;library/ubuntu_office&quot;}, {&quot;description&quot;: &quot;&quot;, &quot;name&quot;: &quot;library/desktop_ubu&quot;}, {&quot;description&quot;: &quot;&quot;, &quot;name&quot;: &quot;dockerfile/ubuntu&quot;}, {&quot;description&quot;: &quot;&quot;, &quot;name&quot;: &quot;library/test&quot;}]}
</code></pre><p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x5230; <code>{&quot;description&quot;: &quot;&quot;, &quot;name&quot;: &quot;library/test&quot;}</code>&#xFF0C;&#x8868;&#x660E;&#x955C;&#x50CF;&#x5DF2;&#x7ECF;&#x88AB;&#x6210;&#x529F;&#x4E0A;&#x4F20;&#x4E86;&#x3002;</p><p>&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x53BB;&#x4E0B;&#x8F7D;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x3002;</p><pre><code>$ sudo docker pull 192.168.7.26:5000/test
Pulling repository 192.168.7.26:5000/test
ba5877dc9bec: Download complete
511136ea3c5a: Download complete
9bad880da3d2: Download complete
25f11f5fb0cb: Download complete
ebc34468f71d: Download complete
2318d26665ef: Download complete
$ sudo docker images
REPOSITORY                         TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
192.168.7.26:5000/test             latest              ba5877dc9bec        6 weeks ago         192.7 MB
</code></pre><p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="https://github.com/yeasy/docker_practice/raw/master/_local/push_images.sh" target="_blank">&#x8FD9;&#x4E2A;&#x811A;&#x672C;</a> &#x6279;&#x91CF;&#x4E0A;&#x4F20;&#x672C;&#x5730;&#x7684;&#x955C;&#x50CF;&#x5230;&#x6CE8;&#x518C;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x672C;&#x5730;&#x6CE8;&#x518C;&#x670D;&#x52A1;&#x5668; <code>127.0.0.1:5000</code>&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p><pre><code>$ wget https://github.com/yeasy/docker_practice/raw/master/_local/push_images.sh; sudo chmod a+x push_images.sh
$ ./push_images.sh ubuntu:latest centos:centos7
The registry server is 127.0.0.1
Uploading ubuntu:latest...
The push refers to a repository [127.0.0.1:5000/ubuntu] (len: 1)
Sending image list
Pushing repository 127.0.0.1:5000/ubuntu (1 tags)
Image 511136ea3c5a already pushed, skipping
Image bfb8b5a2ad34 already pushed, skipping
Image c1f3bdbd8355 already pushed, skipping
Image 897578f527ae already pushed, skipping
Image 9387bcc9826e already pushed, skipping
Image 809ed259f845 already pushed, skipping
Image 96864a7d2df3 already pushed, skipping
Pushing tag for rev [96864a7d2df3] on {http://127.0.0.1:5000/v1/repositories/ubuntu/tags/latest}
Untagged: 127.0.0.1:5000/ubuntu:latest
Done
Uploading centos:centos7...
The push refers to a repository [127.0.0.1:5000/centos] (len: 1)
Sending image list
Pushing repository 127.0.0.1:5000/centos (1 tags)
Image 511136ea3c5a already pushed, skipping
34e94e67e63a: Image successfully pushed
70214e5d0a90: Image successfully pushed
Pushing tag for rev [70214e5d0a90] on {http://127.0.0.1:5000/v1/repositories/centos/tags/centos7}
Untagged: 127.0.0.1:5000/centos:centos7
Done
</code></pre></section></div></div></div><a href="../repository/dockerhub.html" class="navigation navigation-prev" aria-label="Previous page: Docker Hub"><i class="fa fa-angle-left"></i></a> <a href="../repository/config.html" class="navigation navigation-next" aria-label="Next page: 配置文件"><i class="fa fa-angle-right"></i></a></div></div><script src="../gitbook/app.js"></script><script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script><script>require(["gitbook"],function(t){var i={highlight:{},fontsettings:{theme:"white",family:"sans",size:2}};t.start(i)});</script></body></html>